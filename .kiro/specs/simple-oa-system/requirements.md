# 需求文档

## 简介

本文档定义了一个简易办公自动化（OA）系统的需求规格。该系统旨在为中小型企业提供基础的办公管理功能，包括员工信息管理、考勤签到、请假审批、设备管理、合同管理、会议室预定和角色权限分配等核心功能。系统采用角色权限控制，支持超级管理员、HR、财务、设备管理员、主管和普通员工等角色。

## 术语表

- **OA系统**: 办公自动化系统，本文档所描述的目标系统
- **员工**: 系统中的员工用户，拥有基础的个人信息和账号
- **超级管理员**: 拥有系统最高权限，可管理所有角色和员工
- **HR**: 人力资源角色，负责员工管理、工资发放和合同管理
- **财务**: 财务角色，具有查看财务相关信息的权限
- **设备管理员**: 负责设备的增删改查和设备申请审批
- **主管**: 主管角色，负责审批下属的请假申请
- **普通员工**: 拥有基础的系统使用权限
- **考勤记录**: 包含签到签退时间的记录
- **请假申请**: 由员工发起，主管审批的请假请求
- **设备申请**: 由员工发起，设备管理员审批的设备领用请求
- **会议室预定**: 会议室预定记录
- **合同**: 包括入职合同和离职合同
- **工资明细**: 工资明细记录

## 需求列表

### 需求 1: 用户认证与首次登录

**用户故事:** 作为一名新员工，我希望使用初始账号密码登录系统并强制修改密码，以便安全地访问系统功能。

#### 验收标准

1. WHEN 员工首次使用初始凭证登录 THEN OA系统 SHALL 将员工重定向到密码修改页面
2. WHILE 员工处于密码修改页面 THEN OA系统 SHALL 阻止访问其他系统功能直到密码修改完成
3. WHEN 员工提交新密码 THEN OA系统 SHALL 保存新密码
4. WHEN 员工成功修改密码 THEN OA系统 SHALL 更新账号状态标记首次登录已完成
5. WHEN 已完成首次登录的员工尝试登录 THEN OA系统 SHALL 使用更新后的密码进行认证并授予相应功能访问权限
6. WHEN 员工输入错误的用户名或密码 THEN OA系统 SHALL 拒绝登录并显示认证失败提示
7. WHEN 已禁用账号的员工尝试登录 THEN OA系统 SHALL 拒绝登录并显示账号已禁用提示

### 需求 2: 员工信息管理

**用户故事:** 作为一名员工，我希望查看和编辑我的个人信息，以便保持信息的准确性。

#### 验收标准

1. WHEN 员工访问个人信息页面 THEN OA系统 SHALL 显示员工当前信息，包括姓名、工号、部门、职位、联系方式、入职日期和直属主管
2. WHEN 员工提交更新的个人信息 THEN OA系统 SHALL 验证输入并保存更改
3. WHEN 员工查看个人信息 THEN OA系统 SHALL 限制编辑系统管理字段（工号、入职日期、部门、职位、直属主管）

### 需求 3: 工资明细查看

**用户故事:** 作为一名员工，我希望查看我的历史工资明细，以便了解我的薪酬情况。

#### 验收标准

1. WHEN 员工访问工资历史页面 THEN OA系统 SHALL 显示该员工所有工资记录列表，按月份降序排列
2. WHEN 员工选择特定工资记录 THEN OA系统 SHALL 显示详细明细，包括基本工资、奖金、扣款和实发工资
3. WHEN 员工查询工资记录 THEN OA系统 SHALL 仅返回属于该员工的记录

### 需求 4: 每日考勤签到签退

**用户故事:** 作为一名员工，我希望每天进行签到和签退操作，以便记录我的出勤情况。

#### 验收标准

1. WHEN 员工执行签到操作 THEN OA系统 SHALL 记录当前时间戳作为当天的签到时间
2. WHEN 员工执行签退操作 THEN OA系统 SHALL 记录当前时间戳作为当天的签退时间
3. WHEN 员工在同一天已签到后再次尝试签到 THEN OA系统 SHALL 拒绝该操作并显示已存在的签到时间
4. WHEN 员工在未签到的情况下尝试签退 THEN OA系统 SHALL 拒绝该操作并提示员工先签到
5. WHEN 员工查看考勤记录 THEN OA系统 SHALL 显示当月的考勤记录，包含签到和签退时间

### 需求 5: 请假申请与审批

**用户故事:** 作为一名员工，我希望发起请假申请并由主管审批，以及查看我的请假记录，以便按流程请假并了解请假历史。

#### 验收标准

1. WHEN 员工提交包含请假类型、开始日期、结束日期和原因的请假申请 THEN OA系统 SHALL 创建待审批状态的申请并通知员工的主管
2. WHEN 主管查看待审批请假申请 THEN OA系统 SHALL 显示所有下属员工的待审批申请
3. WHEN 主管批准请假申请 THEN OA系统 SHALL 更新申请状态为已批准并通知申请员工
4. WHEN 主管拒绝请假申请并填写原因 THEN OA系统 SHALL 更新申请状态为已拒绝并将拒绝原因通知申请员工
5. WHEN 员工查看自己的请假申请 THEN OA系统 SHALL 显示所有申请及其当前状态（待审批、已批准、已拒绝、已取消）
6. WHEN 员工查看请假记录 THEN OA系统 SHALL 显示该员工所有历史请假记录，包括请假类型、时间、原因和审批结果
7. WHEN 员工取消待审批状态的请假申请 THEN OA系统 SHALL 更新申请状态为已取消并通知主管
8. WHEN 主管取消待审批状态的请假申请 THEN OA系统 SHALL 更新申请状态为已取消并通知申请员工

### 需求 6: 设备管理

**用户故事:** 作为一名设备管理员，我希望管理公司设备的增删改查，以便维护设备清单。

#### 验收标准

1. WHEN 设备管理员添加包含名称、类型、数量和描述的新设备 THEN OA系统 SHALL 创建设备记录并标记为可用
2. WHEN 设备管理员更新设备信息 THEN OA系统 SHALL 保存更改并维护设备历史
3. WHEN 设备管理员删除设备 THEN OA系统 SHALL 从可用列表中移除该设备
4. WHEN 设备管理员查看设备列表 THEN OA系统 SHALL 显示所有设备及其当前状态和可用数量

### 需求 7: 设备申请、领取与归还

**用户故事:** 作为一名员工，我希望查看可领用设备并发起申请，领取后可发起归还，以便获取和归还工作所需设备。

#### 验收标准

1. WHEN 员工查看可用设备 THEN OA系统 SHALL 显示所有可用数量大于零的设备
2. WHEN 员工提交特定设备的设备申请 THEN OA系统 SHALL 创建待审批状态的申请并通知所有设备管理员
3. WHEN 任意一名设备管理员批准设备申请 THEN OA系统 SHALL 更新申请状态为已批准并通知员工前往领取
4. WHEN 任意一名设备管理员拒绝设备申请并填写原因 THEN OA系统 SHALL 更新申请状态为已拒绝并通知员工
5. WHEN 员工确认领取已批准申请的设备 THEN OA系统 SHALL 更新申请状态为已领取并将设备可用数量减一
6. WHEN 员工对已领取的设备发起归还申请 THEN OA系统 SHALL 创建待确认归还状态的申请并通知设备管理员
7. WHEN 设备管理员确认设备归还 THEN OA系统 SHALL 更新申请状态为已归还并将设备可用数量加一
8. WHEN 员工查看自己的设备申请 THEN OA系统 SHALL 显示所有申请及其当前状态（待审批、已批准、已拒绝、已领取、待确认归还、已归还、已取消）
9. WHEN 员工取消待审批状态的设备申请 THEN OA系统 SHALL 更新申请状态为已取消并通知设备管理员
10. WHEN 设备管理员取消待审批状态的设备申请 THEN OA系统 SHALL 更新申请状态为已取消并通知申请员工

### 需求 8: 会议室管理与预定

**用户故事:** 作为超级管理员，我希望管理会议室信息；作为一名员工，我希望预定会议室，以便安排会议。

#### 验收标准

1. WHEN 超级管理员添加包含名称、容纳人数和位置的新会议室 THEN OA系统 SHALL 创建会议室记录并标记为可用
2. WHEN 超级管理员更新会议室信息 THEN OA系统 SHALL 保存更改
3. WHEN 超级管理员删除会议室 THEN OA系统 SHALL 从可用列表中移除该会议室
4. WHEN 员工查看会议室可用情况 THEN OA系统 SHALL 显示所选日期所有会议室的预定状态
5. WHEN 员工提交特定会议室和时间段的预定申请 THEN OA系统 SHALL 检查与现有预定的冲突
6. IF 存在预定冲突 THEN OA系统 SHALL 拒绝预定并显示冲突的预定信息
7. WHEN 不存在预定冲突 THEN OA系统 SHALL 创建预定并为申请员工锁定该时间段
8. WHILE 员工有一个活跃（未使用）的会议室预定 THEN OA系统 SHALL 阻止该员工创建额外的预定
9. WHEN 员工将会议室预定标记为已完成 THEN OA系统 SHALL 更新预定状态并允许员工进行新的预定
10. WHEN 员工查看自己的会议室预定 THEN OA系统 SHALL 显示所有预定及其状态（活跃、已完成、已取消）
11. WHEN 员工取消活跃状态的会议室预定 THEN OA系统 SHALL 更新预定状态为已取消并释放该时间段

### 需求 9: 合同管理

**用户故事:** 作为 HR，我希望发起合同签署流程，以便完成员工的入职或离职手续。

#### 验收标准

1. WHEN HR为特定员工创建合同（入职或离职类型） THEN OA系统 SHALL 创建待签署状态的合同记录并向员工发送通知
2. WHEN 员工收到合同签署通知 THEN OA系统 SHALL 显示合同详情并提供签署选项
3. WHEN 员工签署合同 THEN OA系统 SHALL 更新合同状态为已签署并记录签署时间戳
4. WHEN HR查看合同 THEN OA系统 SHALL 显示所有合同及其当前状态（待签署、已签署）
5. WHEN 员工查看自己的合同 THEN OA系统 SHALL 显示与该员工关联的所有合同

### 需求 10: 工资发放

**用户故事:** 作为财务，我希望为员工发放指定月份的工资，以便完成薪酬管理。

#### 验收标准

1. WHEN 财务为特定员工和月份创建包含工资详情的工资记录 THEN OA系统 SHALL 保存记录并使其对员工可见
2. WHEN 财务尝试为同一员工和月份创建重复的工资记录 THEN OA系统 SHALL 拒绝该操作并显示已存在的记录
3. WHEN 财务查看工资记录 THEN OA系统 SHALL 显示所有工资记录，支持按员工和月份筛选

### 需求 11: 员工账号管理

**用户故事:** 作为超级管理员或 HR，我希望添加新员工、分配角色以及管理账号状态，以便新员工能够使用系统并控制账号访问。

#### 验收标准

1. WHEN OA系统首次部署 THEN OA系统 SHALL 自动创建一个预设的超级管理员账号（用户名：admin，初始密码：admin123）
2. WHEN 超级管理员或HR提交新员工信息（姓名、部门、职位、联系方式、直属主管） THEN OA系统 SHALL 创建员工记录并生成初始登录凭证
3. WHEN 员工账号被创建 THEN OA系统 SHALL 生成唯一工号和符合格式规则的初始密码
4. WHEN 超级管理员或HR在创建时为员工分配角色 THEN OA系统 SHALL 将指定角色与员工账号关联
5. WHEN 超级管理员或HR修改员工角色 THEN OA系统 SHALL 更新角色关联且员工权限立即生效
6. WHEN 员工账号被创建 THEN OA系统 SHALL 标记账号为首次登录需要修改密码
7. WHEN HR禁用员工账号 THEN OA系统 SHALL 将账号状态设为禁用且该员工无法登录系统
8. WHEN HR启用已禁用的员工账号 THEN OA系统 SHALL 将账号状态设为启用且该员工可以正常登录系统
9. WHEN 超级管理员或HR修改员工的直属主管 THEN OA系统 SHALL 更新员工的直属主管关联

### 需求 12: 角色权限控制

**用户故事:** 作为系统管理员，我希望系统能够根据角色控制功能访问，以便确保数据安全和职责分离。

#### 验收标准

1. WHEN 普通员工访问系统 THEN OA系统 SHALL 授予个人信息、考勤、请假申请、请假记录查看、设备申请、会议室预定、工资查看和合同签署功能的访问权限
2. WHEN 超级管理员访问系统 THEN OA系统 SHALL 授予普通员工的所有权限以及角色分配、员工管理和会议室管理功能的访问权限
3. WHEN HR访问系统 THEN OA系统 SHALL 授予普通员工的所有权限以及员工管理、账号启用禁用、合同管理和角色分配功能的访问权限
4. WHEN 财务访问系统 THEN OA系统 SHALL 授予普通员工的所有权限以及工资发放和工资记录查看功能的访问权限
5. WHEN 设备管理员访问系统 THEN OA系统 SHALL 授予普通员工的所有权限以及设备管理和设备申请审批功能的访问权限
6. WHEN 主管访问系统 THEN OA系统 SHALL 授予普通员工的所有权限以及下属员工请假申请审批功能的访问权限
7. WHEN 用户尝试访问其角色权限之外的功能 THEN OA系统 SHALL 拒绝访问并显示授权错误信息


